<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>ECE 3400 Team 2 Website</title>

  <!-- Bootstrap Core CSS -->
  <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

  <!-- Custom Fonts -->
  <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css">
  <link href="vendor/simple-line-icons/css/simple-line-icons.css" rel="stylesheet">

  <!-- Custom CSS -->
  <link href="css/stylish-portfolio.min.css" rel="stylesheet">

</head>

<body id="page-top">

  <!-- Navigation -->
  <a class="menu-toggle rounded" href="#">
    <i class="fas fa-bars"></i>
  </a>
  <nav id="sidebar-wrapper">
    <ul class="sidebar-nav">
      <li class="sidebar-brand">
        <a class="js-scroll-trigger" href="#">Team 2</a>
      </li>
      <li class="sidebar-nav-item">
        <a class="js-scroll-trigger" href="index.html">Home</a>
      </li>
      <li class="sidebar-nav-item">
        <a class="js-scroll-trigger" href="index.html#Team">Team Members</a>
      </li>
 	<li class="sidebar-nav-item">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"> <span class="nav-label">Labs</span><span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a style="color: #1D809F" href="lab1.html#Lab1">Lab 1</a></li>
                        <li><a style="color: #1D809F" href="lab2.html#Lab2">Lab 2</a></li>
                        <li><a style="color: #1D809F" href="lab3.html#Lab3">Lab 3</a></li>
			    <li><a style="color: #1D809F" href="lab4_milestone4.html#Milestone4">Lab 4</a></li>
                      
                    </ul>
                </li>
	<li class="sidebar-nav-item">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"> <span class="nav-label">Milestones</span><span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a style="color: #1D809F" href="milestones.html#Milestone1">Milestone 1</a></li>
                        <li><a style="color: #1D809F" href="milestone2.html#Milestone2">Milestone 2</a></li>
                        <li><a style="color: #1D809F" href="milestone3.html#Milestone3">Milestone 3</a></li>
                        <li><a style="color: #1D809F" href="lab4_milestone4.html#Milestone4">Milestone 4</a></li>
                    </ul>
                </li>
      <li class="sidebar-nav-item">
        <a class="js-scroll-trigger" href="TEAM CONTRACT.pdf">Team Contract</a>
      </li>
    </ul>
  </nav>

  <!-- Header -->
  <header class="masthead d-flex">
    <div class="container text-center my-auto">
      <h1 class=class="mb-1" style="color: white; text-shadow: 2px 2px 5px black;text-indent: 100px;">Milestones</h1>
      <h3 class=class="mb-1" style="color: white; text-shadow: 2px 2px 5px black;text-indent: 100px;">
        <em> What We Have Accomplished </em>
      </h3>
      <a class="btn btn-primary btn-xl js-scroll-trigger" style="margin-left: 100px" href="#Labs">Start</a>
    </div>
    <div class="overlay"></div>
  </header>

  <!-- Milestone -->
  <section class="content-section bg-primary text-white text-center" id="Labs">
    <div class="container">
      <div class="content-section-heading">
        <h3 class="text-secondary mb-0">Milestones</h3>
        <h2 class="mb-5">What We Have Accomplished</h2>
      </div>
      <div class="row">
        <div class="col-lg-3 col-md-6 mb-5 mb-lg-0">
          <span class="service-icon rounded-circle mx-auto mb-3">
   	<a href="milestones.html#Milestone1"><i class="icon-screen-smartphone"></i></a>
          </span>
          <h4><a href="milestones.html#Milestone1" style="color: #FFFFFF">
	<strong  >Milestone 1</strong>
		  </h4></a>

          <p class="text-faded mb-0">Line Following and Figure Eight</p>

        </div>
        <div class="col-lg-3 col-md-6 mb-5 mb-lg-0">
          <span class="service-icon rounded-circle mx-auto mb-3">
          <a href="milestone2.html#Milestone2"><i class="icon-pencil"></i></a>
          </span>
          <h4><a href="milestone2.html#Milestone2" style="color: #FFFFFF">
            <strong  >Milestone 2</strong>
          </h4></a>
          <p class="text-faded mb-0">Right Hand Wall Following</p>
        </div>
        <div class="col-lg-3 col-md-6 mb-5 mb-md-0">
          <span class="service-icon rounded-circle mx-auto mb-3">
        <a href="milestone3.html#Milestone3"><i class="icon-like"></i></a>
          </span>
          <h4><a href="milestone3.html#Milestone3" style="color: #FFFFFF">
		  <strong>Milestone 3</strong>
          </h4></a>
          <p class="text-faded mb-0">Coming Soon</p>
        </div>
        <div class="col-lg-3 col-md-6">
          <span class="service-icon rounded-circle mx-auto mb-3">
            <a href="lab4_milestone4.html#Milestone4"><i class="icon-mustache"></i></a>
          </span>
          <h4><a href="milestone4.html#Milestone4" style="color: #FFFFFF">
		  <strong>Milestone 4</strong>
          </h4></a>
          <p class="text-faded mb-0">Full Robot Integration</p>
        </div>
      </div>

    </div>
  </section>
	
  <!--Milestone 1-->
  <section class="content-section bg-light" id="Milestone1">
    <div class="container">
      <div class="row text-center">
        <div class="col-lg-10 mx-auto">
          <h2>Milestone 1 Line Following and Figure Eight</h2>
          <div class="row">
          <div class="col-lg-3"> 
   
           </div>
          </div>
         
        </div>
      </div>

  <br/>
      <br/>
      
	    <div class="row">
        <div class="col-lg-10 mx-auto">
		<h3>Objectives</h3>
		<p style = "text-indent: 50px;">The objective of this milestone is to make the robot successfully follow the line and traverse a grid in figure eight. </p>
		<ul>Materials Used:
			<li>1 Arduino Uno</li>
			<li>1 USB A/B cable</li>
			<li>1 Continuous rotation servos</li>
			<li>2 Line Sensors</li>
			<li>1 Solderless breadboard</li>
		</ul>
		<p>1. We were considering putting three line sensors on the robot for increased accuracy, but due to the limited amounts of analog pins on the Arduino, we ended up deciding to use two line-sensors, one on each side of the robot. Based on the input from the line sensor, the Arduino will decide whether to go straight or make a turn.</p>
<br>
		<p>2. We started the milestone by testing the line sensors and seeing how sensitive they were. We quickly realized that the line sensor needed to be very close to the ground in order for it to read significant enough difference between black and white. </p>
<br>
		<p>3. We then added parts to our robot to mount the line sensor and replaced the wheels with a more appropriate size. It took a lot of trial and error in order to get the line sensor to rest well and in the proper position.</p>
<br>
		<p>4. Then we start to make the robot follow a line. To follow a line, we arranged the line sensors to be on either side of the line. This involves sensing when both sensors are above black sections. If either sensor is on the white line, the robot will readjust itself so that the sensors will again straddle the white line. This worked well, and our robot followed the line. It was even able to readjust itself when it started to go off course. The video below shows the robot following a straight line. </p>
	
		<!-- Trigger the modal with a button -->
<button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal">Code</button>
		<!-- Modal -->
<div id="myModal" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Line Following Code</h4>
      </div>
      <div class="modal-body">
	      <code > 
		<pre style="color: #b32789">
#include &lt;Servo.h&gt;

int llinesen = A1; //line sensor on the left
int rlinesen = A0; //line sensor on the right
int rWheelPin = 10; //right wheel
int lWheelPin = 9; //left wheel

int threshold = 750;
Servo rWheel;
Servo lWheel;


void setup() {
  Serial.begin(9600);
  pinMode(rWheelPin, OUTPUT);
  pinMode(lWheelPin, OUTPUT);
  pinMode(rlinesen, INPUT);
  pinMode(llinsen, INPUT);
  rWheel.attach(rWheelPin);
  lWheel.attach(lWheelPin);
}

void loop() {
  
  lineFollow();
}

/*this function is for the robot to readjust itself <br>
if it goes off the white line.*/
void lineFollow() {
  if (isLeftWhite() && (!isRightWhite())){
    Serial.println("Correct line left");
    rWheel.write(85);
    lWheel.write(85);
    delay(100);
  }
  else if ((!isLeftWhite()) && isRightWhite()){
    Serial.println("Correct line right");
    rWheel.write(95);
    lWheel.write(95);
    delay(100);
  } 
  else {    
    moveForward();   
  }
  
}

void moveForward() {
  Serial.println("Moving Forward!");
  rWheel.write(85);      
  lWheel.write(95);
  delay(50);
}

bool isLeftWhite() {
  return analogRead(llinesen) < threshold;
}

bool isRightWhite() {
  return analogRead(rlinesen) < threshold;
}
		</pre>
		</code>	
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
		    </div>
		    </br>

           </div>
	  
	 
	  
          </div>
	    <br/>
	    <br/>
			   <div class="row">
        <div class="col-lg-10 mx-auto">
		<video width ="360" height ="640" controls>
			    <source src = "Videos/following line.mp4" type = "video/mp4"
				    Your Browser does not support the video tag.
				    </video> 
			</div>
				   </div>
				   </br>
      	
	<!--part2-->    
	    
    <div class="row">
        <div class="col-lg-10 mx-auto">
		<p>5. After we got the robot to follow a line, we started to work on traversing a figure eight. However, we faced a lot of issues.</p>
		<ul>
			<li>It had a tendency to overturn</li>
			<li>It didn’t stay on the line while it was turning</li>
			<li>Sometimes the robot was confused and turned randomly. </li>
		</ul>
		<p>6. We realized that the primary issue was with the ball bearing on the back of the robot. Because the ball bearing was unstable, the distance from the ground of the line sensors was inconsistent. This made it difficult for the robot to readjust itself. There were also times when the ball bearing was dragging behind the robot. This made it hard to turn and move efficiently.</p>
		<br>
		<p>7. We then rebuilt the robot with new wheels and a better-fitted ball bearing. This change has significantly improved the stability of sensor readings.</P>
		<br>
	    <p>8. In order to get our robot to form a figure 8, we had to revisit the logic in our code. We watched the robot carefully and changed the code incrementally to reduce the amount of under and over-turning at corners. We also recalibrated the line sensors to be more sensitive to the white lines vs. the dark floor.</p>
	    <br>
	    <p>9. We were able to reduce many of the problems in the code by slowing the robot down and taking the turns more slowly. This allowed the robot to stay on the lines and not get lost within squares on the grid. It also gave the robot some time to readjust itself and center itself on the line after each turn.</P>
	   <br>
		    <p>10. We also implemented a counter in the code so that the robot knew where in the figure-8 is was. This reduced errors where the robot would turn the wrong direction. Below is the code and a video showing the robot traversing in a figure 8.</p>
		    
		    <!-- Trigger the modal with a button -->
<button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal2">Code</button>

<!-- Modal -->
<div id="myModal2" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Figure Eight Code</h4>
      </div>
      <div class="modal-body">
		<code > 
		<pre style="color: #b32789">

#include &lt;Servo.h&gt;

int llinesen = A1; //line sensor on the left
int rlinesen = A0; //line sensor on the right
int rWheelPin = 10; //right wheel
int lWheelPin = 9; //left wheel

int counter = 0;  //counter to keep tract of where the robot is in figure 8
int threshold = 750;
Servo rWheel;
Servo lWheel;


void setup() {
  Serial.begin(9600);
  pinMode(rWheelPin, OUTPUT);
  pinMode(lWheelPin, OUTPUT);
  rWheel.attach(rWheelPin);
  lWheel.attach(lWheelPin);
}

void loop() {

 //Uncomment the following line for testing line sensor values
//  test();
  
  rWheel.write(90);
  lWheel.write(90);
  
  if (isLeftWhite() && isRightWhite()){
    Serial.println(analogRead(rlinesen));
    Serial.println(analogRead(llinesen));

    rWheel.write(90);
    lWheel.write(90);
    delay(300);
    Serial.println(counter);
  
    switch (counter) {
      case 0:
      case 5:
        if(isLeftWhite() && isRightWhite()){
          turnRight();
          moveForward();
          moveForward();
        } else {
          counter--;
        }
        break;
      case 6:
        if(isLeftWhite() && isRightWhite()){
          turnRight();
          moveForward();
          moveForward();
        } else {
          counter--;
        }
        break;     
      case 1 ... 4:
        if(isLeftWhite() && isRightWhite()){
          turnLeft();
          moveForward();
        } else {
          counter --;
        }
        break;
      default: 
        break;
    } 
    counter ++;
  }
  
  lineFollow();
}

void moveForward() {
  Serial.println("Moving Forward!");
  rWheel.write(87);      
  lWheel.write(93);
  delay(50);
}

void turnRight() {
  Serial.println("Turning Right!");
  //move forward a little bit before turning to prevent overturn
  moveForward();
  moveForward();
  //stop and then turn
  rWheel.write(90);
  lWheel.write(90);
  delay(200);
  rWheel.write(95);
  lWheel.write(180);
  delay(675);
}

void turnLeft() {
  Serial.println("Turning Left!");
  moveForward();
  moveForward();
  rWheel.write(90);
  lWheel.write(90);
  delay(200);

  rWheel.write(0);
  lWheel.write(180);
  delay(675);
}

/*this function is for the robot to readjust itself <br>
if it goes off the white line.*/
void lineFollow() {
  if (isLeftWhite() && (!isRightWhite())){
    Serial.println("Correct line left");
    rWheel.write(85);
    lWheel.write(85);
    delay(100);
  }
  else if ((!isLeftWhite()) && isRightWhite()){
    Serial.println("Correct line right");
    rWheel.write(95);
    lWheel.write(95);
    delay(100);
  } 
  else {    
    moveForward();   
  }
  
}

bool isLeftWhite() {
  return analogRead(llinesen) < threshold;
}

bool isRightWhite() {
  return analogRead(rlinesen) < threshold;
}


void test() {
  while(true){
    rWheel.write(90);
    lWheel.write(90);
    Serial.print("left  Sensor: ");
    Serial.println(analogRead(llinesen));
    Serial.print("Right Sensor: ");
    Serial.println(analogRead(rlinesen));
  }
}
</pre>
		</code>	
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
		    </div>
		    </br>

           </div>
          </div>
	    <br/>
	    <br/>
	   <div class="row">
        <div class="col-lg-10 mx-auto">
			 <video width ="640" height ="360" controls>

			    <source src = "Videos/figure 8.mp4" type = "video/mp4"

				    Your Browser does not support the video tag.
				    </video>   
				  </div>
		 </div>
	    
    </div>

				 
  </section>

  <!-- Callout -->
  <section class="callout">
    <div class="container text-center">
      <h2 class="mx-auto mb-5">Welcome to
        <em>our</em>
        website!</h2>
      <a class="btn btn-primary btn-xl" href="#">Github Link</a>
    </div>
  </section>



  <!-- Call to Action -->
  <section class="content-section bg-primary text-white">
    <div class="container text-center">
      <h2 class="mb-4">The buttons below are impossible to resist...</h2>
      <a href="#" class="btn btn-xl btn-light mr-4">Click Me!</a>
      <a href="#" class="btn btn-xl btn-dark">Look at Me!</a>
    </div>
  </section>

 


  <!-- Footer -->
  <footer class="footer text-center">
    <div class="container">
      <ul class="list-inline mb-5">
        <li class="list-inline-item">
          <a class="social-link rounded-circle text-white mr-3" href="#">
            <i class="icon-social-facebook"></i>
          </a>
        </li>
        <li class="list-inline-item">
          <a class="social-link rounded-circle text-white mr-3" href="#">
            <i class="icon-social-twitter"></i>
          </a>
        </li>
        <li class="list-inline-item">
          <a class="social-link rounded-circle text-white" href="#">
            <i class="icon-social-github"></i>
          </a>
        </li>
      </ul>
      <p class="text-muted small mb-0">Copyright &copy; Start Bootstrap: Stylish Portfolio Theme</p>
    </div>
  </footer>

  <!-- Scroll to Top Button-->
  <a class="scroll-to-top rounded js-scroll-trigger" href="#page-top">
    <i class="fas fa-angle-up"></i>
  </a>

  <!-- Bootstrap core JavaScript -->
  <script src="vendor/jquery/jquery.min.js"></script>
  <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <!-- Plugin JavaScript -->
  <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

  <!-- Custom scripts for this template -->
  <script src="js/stylish-portfolio.min.js"></script>

</body>

</html>
