<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>ECE 3400 Team 2 Website</title>

  <!-- Bootstrap Core CSS -->
  <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

  <!-- Custom Fonts -->
  <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css">
  <link href="vendor/simple-line-icons/css/simple-line-icons.css" rel="stylesheet">

  <!-- Custom CSS -->
  <link href="css/stylish-portfolio.min.css" rel="stylesheet">

</head>

<body id="page-top">

  <!-- Navigation -->
  <a class="menu-toggle rounded" href="#">
    <i class="fas fa-bars"></i>
  </a>
  <nav id="sidebar-wrapper">
    <ul class="sidebar-nav">
      <li class="sidebar-brand">
        <a class="js-scroll-trigger" href="#">Team 2</a>
      </li>
      <li class="sidebar-nav-item">
        <a class="js-scroll-trigger" href="index.html">Home</a>
      </li>
      <li class="sidebar-nav-item">
        <a class="js-scroll-trigger" href="index.html#Team">Team Members</a>
      </li>
 	<li class="sidebar-nav-item">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"> <span class="nav-label">Labs</span><span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a style="color: #1D809F" href="lab1.html#Lab1">Lab 1</a></li>
                        <li><a style="color: #1D809F" href="lab2.html#Lab2">Lab 2</a></li>
                        <li><a style="color: #1D809F" href="lab3.html#Lab3">Lab 3</a></li>
			    <li><a style="color: #1D809F" href="lab4_milestone4.html#Milestone4">Lab 4</a></li>
                       
                    </ul>
                </li>
	<li class="sidebar-nav-item">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"> <span class="nav-label">Milestones</span><span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a style="color: #1D809F" href="milestones.html#Milestone1">Milestone 1</a></li>
                        <li><a style="color: #1D809F" href="milestone2.html#Milestone2">Milestone 2</a></li>
                        <li><a style="color: #1D809F" href="milestone3.html#Milestone3">Milestone 3</a></li>
                        <li><a style="color: #1D809F" href="lab4_milestone4.html#Milestone4">Milestone 4</a></li>
                    </ul>
                </li>
      <li class="sidebar-nav-item">
        <a class="js-scroll-trigger" href="TEAM CONTRACT.pdf">Team Contract</a>
      </li>
    </ul>
  </nav>

  <!-- Header -->
  <header class="masthead d-flex">
    <div class="container text-center my-auto">
      <h1 class=class="mb-1" style="color: white; text-shadow: 2px 2px 5px black; text-indent: 100px;">Milestones</h1>
      <h3 class=class="mb-1" style="color: white; text-shadow: 2px 2px 5px black; text-indent: 100px;">
        <em> What We Have Accomplished </em>
      </h3>
      <a class="btn btn-primary btn-xl js-scroll-trigger" style="margin-left: 100px" href="#Labs">Start</a>
    </div>
    <div class="overlay"></div>
  </header>

 <!--Create Link within this html file-->
  <!-- Milestone -->
  <section class="content-section bg-primary text-white text-center" id="Labs">
    <div class="container">
      <div class="content-section-heading">
        <h3 class="text-secondary mb-0">Milestones</h3>
        <h2 class="mb-5">What We Have Accomplished :)</h2>
      </div>
      <div class="row">
        <div class="col-lg-3 col-md-6 mb-5 mb-lg-0">
          <span class="service-icon rounded-circle mx-auto mb-3">
   	<a href="milestones.html#Milestone1"><i class="icon-screen-smartphone"></i></a>
          </span>
          <h4><a href="milestones.html#Milestone1" style="color: #FFFFFF">
	<strong  >Milestone 1</strong>
		  </h4></a>
          <p class="text-faded mb-0">Line Following and Figure Eight</p>

        </div>
        <div class="col-lg-3 col-md-6 mb-5 mb-lg-0">
          <span class="service-icon rounded-circle mx-auto mb-3">
          <a href="milestone2.html#Milestone2"><i class="icon-pencil"></i></a>
          </span>
          <h4><a href="milestone2.html#Milestone2" style="color: #FFFFFF">
            <strong  >Milestone 2</strong>
          </h4></a>
          <p class="text-faded mb-0">Right Hand Wall Following</p>
        </div>
        <div class="col-lg-3 col-md-6 mb-5 mb-md-0">
          <span class="service-icon rounded-circle mx-auto mb-3">
        <a href="milestone3.html#Milestone3"><i class="icon-like"></i></a>
          </span>
          <h4><a href="milestone3.html#Milestone3" style="color: #FFFFFF">
		  <strong>Milestone 3</strong>
          </h4></a>
          <p class="text-faded mb-0">Coming Soon</p>
        </div>
        <div class="col-lg-3 col-md-6">
          <span class="service-icon rounded-circle mx-auto mb-3">
            <a href="milestone4.html#Milestone4"><i class="icon-mustache"></i></a>
          </span>
          <h4><a href="milestone4.html#Milestone4" style="color: #FFFFFF">
		  <strong>Milestone 4</strong>
          </h4></a>
          <p class="text-faded mb-0">Full Robot Integration</p>
        </div>
      </div>

    </div>
  </section>
	

  <!--Milestone 2-->
  <section class="content-section bg-light" id="Milestone2">
    <div class="container">
      <div class="row text-center">
        <div class="col-lg-10 mx-auto">
          <h2>Milestone 2 Right Hand Wall Following</h2>
          <div class="row">
          <div class="col-lg-3"> 
   
           </div>
          </div>
         
        </div>
      </div>

  <br/>
      
	    <div class="row">
        <div class="col-lg-10 mx-auto">
		<h3>Objectives</h3>
		<p style = "text-indent: 50px;">For milestone 2, we want the robot to successfully circle an arbitrary set of walls while following the line. For now, we use the right-hand wall following rule. So the robot will always follow the wall on its right.</p>
		<ul>Materials Used:
			<li>1 Arduino Uno</li>
			<li>1 USB A/B Cable</li>
			<li>2 IR Sensors</li>
			<li>Variuos Resistors</li>
			<li>LM358 Op-Amp</li>
			<li>1 Solderless breadboard</li>
		</ul>
		<p>1. We began this session by verifying that our robot’s Schmitt triggers were working. An image of the schematics of the Schmitt Trigger circuit we are using is shown below. For detailed information on the Schmitt trigger, see Lab 2. We also refined our robot’s turning so that it stayed on the line. In the past, it had cut corners. We changed the code to have the robot move slightly past each intersection before making a sharp 90-degree turn. This was essential for wall following and future movement in the maze because the robot would have run into walls if it did not stay on the line for every stage of its turns.</p>
<br>
		<img src="Pictures/schmitt trigger circuit.png">
		</br>
		    </br>
		<p>2. In order to start the wall following, we mounted two wall sensors to the robot. To do this, we added a second chassis to create a second level to the robot. We mounted wall sensors to the right side and front of the robot, which we needed to do right-hand wall following. We began by soldering the wall sensors onto wires that could easily be integrated into our existing Arduino and breadboard. In order to get a sense of how the wall sensors worked, we held them at different distances from the wooden walls. This allowed us to get a sense of the range of the IR sensors and the values that were read at different distances. We converted the analog values into float decimals and decided a threshold value for both the right and front wall sensors. This value decided when the robot had come close enough to a wall and had to make a decision. </p>
<br>
		<p>3. The robot was then coded to do a right-hand search around a set of walls. This involved keeping the robot on the grid and turning right whenever there was no longer a wall there. If there was a wall, the robot would go forward. If both the right and front sensors detected walls, the robot turned left. This basic sequence of statements allowed the robot to traverse on the right side of a set of walls. At this point, the Arduino was reading values from the two line sensors and the two wall sensors and making logical decisions in real-time. The video is shown here.</p>
<br>
		<p>4. Then we start to make the robot follow a line. To follow a line, we arranged the line sensors to be on either side of the line. This involves sensing when both sensors are above black sections. If either sensor is on the white line, the robot will readjust itself so that the sensors will again straddle the white line. This worked well, and our robot followed the line. It was even able to readjust itself when it started to go off course. The video below shows the robot following a straight line. </p>
	    
		<!-- Trigger the modal with a button -->
<button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal3">Wall Following Code</button>
		<!-- Modal -->
<div id="myModal3" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Right Hand Wall Following Code</h4>
      </div>
      <div class="modal-body">
	      <code > 
		<pre style="color: #b32789">
#include &lt;Servo.h&gt;

#define f_sensor A0 // Sharp IR GP2Y0A41SK0F (4-30cm, analog)
#define r_sensor A1

int llinesen = 5; //line sensor on the left
int rlinesen = 4; //line sensor on the right
int rWheelPin = 10; //right wheel
int lWheelPin = 9; //left wheel
int greenLed = 11;
int redLed = 8;

int line_thresh = 750;
float dist_thresh_f = 5;
int dist_thresh_r = 15;


Servo rWheel;
Servo lWheel;

void setup() {
  Serial.begin(9600); // start the serial port
  pinMode(rWheelPin, OUTPUT);
  pinMode(lWheelPin, OUTPUT);
  pinMode(rlinesen, INPUT);
  rWheel.attach(rWheelPin);
  lWheel.attach(lWheelPin);
}

void loop() {
  
  rWheel.write(90);
  lWheel.write(90);
  lineFollow();
  distCheck();
}

void moveForward() {
  Serial.println("Moving Forward!");
  rWheel.write(87);      
  lWheel.write(93);
  delay(50);
}

void distCheck() {
  float f_volts = analogRead(f_sensor)*0.0048828125;  // value from sensor * (5/1024)
  float f_distance = 13*pow(f_volts, -1); // worked out from datasheet graph
  
  float r_volts = analogRead(r_sensor)*0.0048828125;  // value from sensor * (5/1024)
  int r_distance = 13*pow(r_volts, -1); // worked out from datasheet graph
    rWheel.write(90);
    lWheel.write(90);
     delay(200);

  if (r_distance > dist_thresh_r){
      Serial.println("Right turn");
      Serial.print("forward Sensor: ");
      Serial.println(f_distance);
      Serial.print("Right   Sensor: ");
      Serial.println(r_distance);    
      turnRight();
  }
  else if (f_distance <= dist_thresh_f){
      Serial.println("Left turn");
      Serial.print("forward Sensor: ");
      Serial.println(f_distance);
      Serial.print("Right Sensor: ");
      Serial.println(r_distance);    
      turnLeft();
  } 
  else {
      Serial.println("forward");
      Serial.print("forward Sensor: ");
      Serial.println(f_distance);
      Serial.print("Right   Sensor: ");
      Serial.println(r_distance);
    moveForward();  
  }

}

void turnRight() {
  Serial.println("Turning Right!");
  //move forward a little bit before turning to prevent overturn

    int i = 0;
  while(i<30){
    moveForward();
    i++;
  }
  rWheel.write(90);
  lWheel.write(90);
  delay(200);
  lWheel.write(180);
  rWheel.write(95);
  delay(675);
}

void turnLeft() {
  Serial.println("Turning Left!");
  
  int i = 0;
  while(i<30){
    moveForward();
    i++;

  }
  rWheel.write(90);
  lWheel.write(90);
  delay(200);

  rWheel.write(0);
  lWheel.write(85);
  delay(675);
}


bool isLeftWhite() {
  return digitalRead(llinesen) == 1;
}

bool isRightWhite() {
  return digitalRead(rlinesen) == 1;
}

/*this function is for the robot to readjust itself <br>
if it goes off the white line.*/
void lineFollow() {
  if (isLeftWhite() && (!isRightWhite())){
    Serial.println("Correct line left");
    rWheel.write(85);
    lWheel.write(85);
    delay(100);
  }
  else if ((!isLeftWhite()) && isRightWhite()){
    Serial.println("Correct line right");
    rWheel.write(95);
    lWheel.write(95);
    delay(100);
  } else if (isLeftWhite() && isRightWhite()){
    rWheel.write(90);
    lWheel.write(90);
    distCheck();
    digitalWrite(greenLed, LOW);
    digitalWrite(redLed, LOW);
    delay(300);
  }  else {    
    moveForward();  
//    distCheck();

  }
}


		</pre>
		</code>	
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
		    </div>
		    </br>

           </div>
	   </div>
	    <br/>
	    <br/>
			   <div class="row">
        <div class="col-lg-10 mx-auto">
		<video width ="360" height ="640" controls>
			    <source src = "Videos/Wall following.mp4" type = "video/mp4">
				    Your Browser does not support the video tag.
				    </video> 
			</div>
				   </div>
				   </br>
      	
	<!--part2-->    
	    
    <div class="row">
        <div class="col-lg-10 mx-auto">
		<p>5. Lastly, we added a green LED to show what the robot was “thinking.” we added an LED digital output to our Arduino that would light up whenever the robot saw a wall. We will build on this in the future as we will need to discern between seeing walls and seeing robots. The video below shows the LED circuit that we built in lab. The green LED will only light up when the robot detects a wall on its right.</p>
		
		    
		    <!-- Trigger the modal with a button -->
<button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal4">LED Code</button>

<!-- Modal -->
<div id="myModal4" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">LED Code</h4>
      </div>
      <div class="modal-body">
	      <p> This is the part where we control the on/off of the green LED.</p>
		<code > 
		<pre style="color: #b32789">

void distCheck() {
  float f_volts = analogRead(f_sensor)*0.0048828125;  // value from sensor * (5/1024)
  float f_distance = 13*pow(f_volts, -1); // worked out from datasheet graph
  
  float r_volts = analogRead(r_sensor)*0.0048828125;  // value from sensor * (5/1024)
  int r_distance = 13*pow(r_volts, -1); // worked out from datasheet graph
    rWheel.write(90);
    lWheel.write(90);
     delay(200);
//The robot turn right when there is no wall in front or on the right
//So no LED will light up
  if (r_distance > dist_thresh_r){
      digitalWrite(greenLed, LOW);
      digitalWrite(redLed, LOW);
      Serial.println("Right turn");
      Serial.print("forward Sensor: ");
      Serial.println(f_distance);
      Serial.print("Right   Sensor: ");
      Serial.println(r_distance);    
      turnRight();
  }
  else if (f_distance <= dist_thresh_f){
      Serial.println("Left turn");
      Serial.print("forward Sensor: ");
      Serial.println(f_distance);
      Serial.print("Right   Sensor: ");
      Serial.println(r_distance);    
      turnLeft();
  } 
  //Moving forward means there is a wall on the right
  //The green LED will light up
  else {
      digitalWrite(greenLed, HIGH);
      Serial.println("forward");
      Serial.print("forward Sensor: ");
      Serial.println(f_distance);
      Serial.print("Right   Sensor: ");
      Serial.println(r_distance);
    moveForward();  
  }

}

</pre>
		</code>	
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
		    </div>
		    </br>

           </div>
          </div>
	    <br/>
	    <br/>
	   <div class="row">
        <div class="col-lg-10 mx-auto">
			 <video width ="360" height ="640" controls>

			    <source src = "Videos/LED wall.mp4" type = "video/mp4">

				    Your Browser does not support the video tag.
				    </video>   
				  </div>
		   </div>	    
    </div>			 
  </section>

  <!-- Callout -->
  <section class="callout">
    <div class="container text-center">
      <h2 class="mx-auto mb-5">Welcome to
        <em>our</em>
        website!</h2>
      <a class="btn btn-primary btn-xl" href="#">Github Link</a>
    </div>
  </section>



  <!-- Call to Action -->
  <section class="content-section bg-primary text-white">
    <div class="container text-center">
      <h2 class="mb-4">The buttons below are impossible to resist...</h2>
      <a href="#" class="btn btn-xl btn-light mr-4">Click Me!</a>
      <a href="#" class="btn btn-xl btn-dark">Look at Me!</a>
    </div>
  </section>

 


  <!-- Footer -->
  <footer class="footer text-center">
    <div class="container">
      <ul class="list-inline mb-5">
        <li class="list-inline-item">
          <a class="social-link rounded-circle text-white mr-3" href="#">
            <i class="icon-social-facebook"></i>
          </a>
        </li>
        <li class="list-inline-item">
          <a class="social-link rounded-circle text-white mr-3" href="#">
            <i class="icon-social-twitter"></i>
          </a>
        </li>
        <li class="list-inline-item">
          <a class="social-link rounded-circle text-white" href="#">
            <i class="icon-social-github"></i>
          </a>
        </li>
      </ul>
      <p class="text-muted small mb-0">Copyright &copy; Start Bootstrap: Stylish Portfolio Theme</p>
    </div>
  </footer>

  <!-- Scroll to Top Button-->
  <a class="scroll-to-top rounded js-scroll-trigger" href="#page-top">
    <i class="fas fa-angle-up"></i>
  </a>

  <!-- Bootstrap core JavaScript -->
  <script src="vendor/jquery/jquery.min.js"></script>
  <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <!-- Plugin JavaScript -->
  <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

  <!-- Custom scripts for this template -->
  <script src="js/stylish-portfolio.min.js"></script>

</body>

</html>
